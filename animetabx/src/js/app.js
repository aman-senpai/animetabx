var T=Object.defineProperty;var v=(h,e,t)=>e in h?T(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var k=(h,e,t)=>v(h,typeof e!="symbol"?e+"":e,t);const i={API:{ANIME_RANDOM:"https://api.jikan.moe/v4/random/anime",WALLPAPER:"https://api.waifu.im/search",NEKO:"https://api.nekos.best/v2"},UI:{NEWS_ITEMS_LIMIT:10,WALLPAPER_OPACITY:"cc",BORDER_OPACITY:"4d"},STORAGE_KEYS:{LAST_WALLPAPER:"lastWallpaper",THEME:"theme"},news:{sources:{anime:{name:"Anime News Network",url:"https://www.animenewsnetwork.com/news/rss.xml?ann-edition=us",fallback:{title:"Anime News Network",url:"https://www.animenewsnetwork.com/news/",description:"Visit Anime News Network for the latest anime news and updates"}},hackernews:{name:"Hacker News",url:"https://hacker-news.firebaseio.com/v0/topstories.json",itemUrl:"https://hacker-news.firebaseio.com/v0/item/",fallback:{title:"Hacker News",url:"https://news.ycombinator.com/",description:"Visit Hacker News for the latest tech news and discussions"}}},defaultSource:"anime",refreshInterval:3e5,itemsPerPage:10}};async function w(h){try{return new Promise((e,t)=>{chrome.runtime.sendMessage({type:"fetch",url:h},s=>{s.success?e(s.data):t(new Error(s.error||"Failed to fetch data"))})})}catch(e){throw console.error("Fetch error:",e),e}}function y(h,e,t){return"#"+[h,e,t].map(s=>{const a=s.toString(16);return a.length===1?"0"+a:a}).join("")}function P(h,e){const t=document.createElement("a");t.href=h,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}class N{static getRandomSFWTag(){const e=this.tags.versatile;return e[Math.floor(Math.random()*e.length)]}static getRandomNSFWTag(){const e=this.tags.nsfw;return e[Math.floor(Math.random()*e.length)]}static async getRandomAnime(){var e,t,s,a,o,r,c,l,d,p;try{const u=await w(i.API.ANIME_RANDOM),g=JSON.parse(u);if(!g||!g.data)throw new Error("Invalid response from Jikan API");const n=g.data,f=n.rating==="Rx - Hentai"||n.rating==="R+ - Mild Nudity"||n.rating==="R - 17+ (violence & profanity)";return{id:n.mal_id,url:n.url,title:n.title,titleEnglish:n.title_english,titleJapanese:n.title_japanese,type:n.type,episodes:n.episodes,status:n.status,duration:n.duration,rating:n.rating,isNSFW:f,score:n.score,synopsis:n.synopsis,image:((t=(e=n.images)==null?void 0:e.jpg)==null?void 0:t.large_image_url)||((a=(s=n.images)==null?void 0:s.jpg)==null?void 0:a.image_url),genres:((o=n.genres)==null?void 0:o.map(m=>m.name))||[],themes:((r=n.themes)==null?void 0:r.map(m=>m.name))||[],demographics:((c=n.demographics)==null?void 0:c.map(m=>m.name))||[],aired:((l=n.aired)==null?void 0:l.string)||"Unknown",source:n.source,studios:((d=n.studios)==null?void 0:d.map(m=>m.name))||[],producers:((p=n.producers)==null?void 0:p.map(m=>m.name))||[]}}catch(u){throw console.error("Error fetching random anime:",u),u}}static async getAnimeNews(){try{const e=await w(i.API.ANIME_NEWS),a=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("item");return Array.from(a).slice(0,i.UI.NEWS_ITEMS_LIMIT).map(o=>({title:o.getElementsByTagName("title")[0].textContent,link:o.getElementsByTagName("link")[0].textContent,description:o.getElementsByTagName("description")[0].textContent}))}catch(e){throw console.error("Error fetching anime news:",e),e}}static async isLandscapeImage(e){return new Promise(t=>{const s=new Image;s.onload=()=>{t(s.width>s.height)},s.onerror=()=>{t(!1)},s.src=e})}static async getNekoImage(e=!1){try{const t=["neko","kitsune","husbando","waifu"],s=t[Math.floor(Math.random()*t.length)],a=await w(`${i.API.NEKO}/${s}`),o=JSON.parse(a);if(!o.results||!Array.isArray(o.results)||o.results.length===0)throw new Error("Invalid response from Nekos.best API");const r=o.results[0];if(!r.url)throw new Error("Invalid image URL");return{url:r.url,title:r.artist_name?`Art by ${r.artist_name}`:"Nekos.best",source:r.source_url||"Nekos.best",colorPalette:null,rating:"safe",tags:[],artist:r.artist_name||null,animeName:r.anime_name||null}}catch(t){throw console.error("Error fetching from Nekos.best API:",t),t}}static async getWaifuImage(e=!1){try{const t=e?this.getRandomNSFWTag():this.getRandomSFWTag(),s=new URL(i.API.WALLPAPER);s.searchParams.append("included_tags",t),s.searchParams.append("width",">=2000"),s.searchParams.append("is_nsfw",e.toString());const a=await w(s.toString()),o=JSON.parse(a);if(!o.images||!Array.isArray(o.images)||o.images.length===0)throw new Error("No wallpapers found");const r=o.images[0];if(!r.url)throw new Error("Invalid image URL");return{url:r.url,title:r.tags.map(c=>c.name).join(", "),source:"Waifu.im",colorPalette:null}}catch(t){throw console.error("Failed to fetch from Waifu.im:",t),t}}static async getRandomWallpaper(e=!1){try{const t=Promise.race([this.getWaifuImage(e),new Promise((l,d)=>setTimeout(()=>d(new Error("Waifu.im timeout")),5e3))]).catch(l=>(console.error("Waifu.im API failed:",l),null)),s=Promise.race([this.getNekoImage(e),new Promise((l,d)=>setTimeout(()=>d(new Error("Nekos.best API timeout")),5e3))]).catch(l=>(console.error("Nekos.best API failed:",l),null)),[a,o]=await Promise.all([t,s]),r=[a,o].filter(l=>l!==null);if(r.length===0)throw new Error("All APIs failed to return suitable images");const c=r[Math.floor(Math.random()*r.length)];return console.log(`Using image from ${c.source}`),c}catch(t){throw console.error("Error getting random wallpaper:",t),t}}static async getWallpaper(e=!1,t=!1){try{const s=localStorage.getItem("wallpaperCache"),a=Date.now();if(!e&&s){const c=JSON.parse(s),{wallpaper:l,timestamp:d,cachedAllowNSFW:p}=c,u=4*60*60*1e3;if(a-d<u&&p===t)return console.log("Using cached wallpaper"),l}console.log("Fetching new wallpaper");const o=await this.getRandomWallpaper(t),r={wallpaper:o,timestamp:a,allowNSFW:t};return localStorage.setItem("wallpaperCache",JSON.stringify(r)),console.log("Cached new wallpaper"),o}catch(s){throw console.error("Error getting wallpaper:",s),s}}}k(N,"tags",{versatile:["maid","waifu","marin-kitagawa","mori-calliope","raiden-shogun","oppai","selfies","uniform","kamisato-ayaka"],nsfw:["ass","hentai","milf","oral","paizuri","ecchi","ero"]});class I{static applyColorTheme(e){const t=document.documentElement,s=y(...e[0]),a=y(...e[1]),o=y(...e[2]);t.style.setProperty("--text-color",s),t.style.setProperty("--bg-color",a),t.style.setProperty("--accent-color",o),document.querySelectorAll("#download-btn, #shuffle-btn").forEach(l=>{l.style.backgroundColor=`${a}${i.UI.WALLPAPER_OPACITY}`,l.style.borderColor=o}),document.querySelectorAll(".news-item").forEach(l=>{l.style.backgroundColor=`${a}${i.UI.WALLPAPER_OPACITY}`,l.style.borderColor=`${o}${i.UI.BORDER_OPACITY}`}),chrome.storage.local.set({[i.STORAGE_KEYS.THEME]:{textColor:s,bgColor:a,accentColor:o}})}static async loadSavedTheme(){try{const e=await chrome.storage.local.get(i.STORAGE_KEYS.THEME);if(e[i.STORAGE_KEYS.THEME]){const{textColor:t,bgColor:s,accentColor:a}=e[i.STORAGE_KEYS.THEME],o=document.documentElement;o.style.setProperty("--text-color",t),o.style.setProperty("--bg-color",s),o.style.setProperty("--accent-color",a)}}catch(e){console.error("Error loading saved theme:",e)}}}class L{constructor(){this.wallpaperImage=document.getElementById("wallpaper-image"),this.wallpaperLoading=document.getElementById("wallpaper-loading"),this.downloadBtn=document.getElementById("download-btn"),this.shuffleBtn=document.getElementById("shuffle-btn"),this.newsContainer=document.getElementById("news-container"),this.newsContent=document.getElementById("news-content"),this.newsToggle=document.getElementById("news-toggle"),this.timeElement=document.getElementById("time"),this.dateElement=document.getElementById("date"),this.nsfwToggle=document.getElementById("nsfw-toggle"),this.searchInput=document.getElementById("search-input"),this.searchBtns=document.querySelectorAll(".search-engine-btn"),this.currentWallpaper=null,this.allowNSFW=localStorage.getItem("allowNSFW")==="true",this.currentEngine=localStorage.getItem("searchEngine")||"google",this.isNewsExpanded=localStorage.getItem("newsExpanded")==="true",this.initializeEventListeners(),this.initClock(),this.updateNSFWToggleState(),this.initializeSearch(),this.initializeNewsSource(),this.initializeNews(),this.initializeNewsToggle()}initializeEventListeners(){this.downloadBtn.addEventListener("click",()=>this.handleDownload()),this.shuffleBtn.addEventListener("click",()=>this.initWallpaper(!0)),this.nsfwToggle.addEventListener("click",()=>this.toggleNSFW())}initializeSearch(){this.searchBtns.forEach(e=>{e.addEventListener("click",()=>{this.setActiveEngine(e.dataset.engine)})}),this.searchInput.addEventListener("keypress",e=>{e.key==="Enter"&&this.performSearch()}),this.setActiveEngine(this.currentEngine)}setActiveEngine(e){this.searchBtns.forEach(t=>{t.dataset.engine===e?t.classList.add("active"):t.classList.remove("active")}),this.currentEngine=e,localStorage.setItem("searchEngine",e)}performSearch(){const e=this.searchInput.value.trim();if(!e)return;let t;switch(this.currentEngine){case"google":t=`https://www.google.com/search?q=${encodeURIComponent(e)}`;break;case"duckduckgo":t=`https://duckduckgo.com/?q=${encodeURIComponent(e)}`;break;case"gemini":t=`https://gemini.google.com/search?q=${encodeURIComponent(e)}`;break;case"anime":t=`https://hianimez.to/search?keyword=${encodeURIComponent(e)}`;break}window.location.href=t}updateNSFWToggleState(){this.nsfwToggle.textContent=this.allowNSFW?"NSFW":"SFW",this.allowNSFW?this.nsfwToggle.classList.add("active"):this.nsfwToggle.classList.remove("active")}toggleNSFW(){this.allowNSFW=!this.allowNSFW,this.updateNSFWToggleState(),localStorage.setItem("allowNSFW",this.allowNSFW),this.initWallpaper(!0)}async loadNSFWPreference(){const e=localStorage.getItem("allowNSFW")==="true";this.allowNSFW=e,this.allowNSFW&&this.nsfwToggle.classList.add("active")}async loadCachedWallpaper(){try{const e=localStorage.getItem("wallpaperCache");if(e){const t=JSON.parse(e),{wallpaper:s,allowNSFW:a}=t;return this.allowNSFW=a,this.allowNSFW&&this.nsfwToggle.classList.add("active"),this.updateWallpaper(s),!0}return!1}catch(e){return console.error("Error loading cached wallpaper:",e),!1}}async handleDownload(){if(this.currentWallpaper)try{const t=new URL(this.currentWallpaper.url).pathname.split(".").pop()||"jpg",a=`anime_wallpaper_${this.currentWallpaper.source.toLowerCase().replace(/[^a-z0-9]/g,"_")}_${Date.now()}.${t}`;await chrome.downloads.download({url:this.currentWallpaper.url,filename:a,saveAs:!1})}catch(e){console.error("Download failed:",e),P(this.currentWallpaper.url,`anime_wallpaper_${Date.now()}.jpg`)}}updateWallpaper(e){this.wallpaperImage.src=e.url;let t=e.title;e.artist?t=`Art by ${e.artist}`:e.tags&&e.tags.length>0&&(t=e.tags.filter(s=>!s.includes("exposed_")&&!s.includes("_breasts")).map(s=>s.replace(/_/g," ")).join(", ")),this.wallpaperImage.alt=t,e.colorPalette&&I.applyColorTheme(e.colorPalette),this.wallpaperImage.onload=()=>{if(this.wallpaperLoading.classList.add("hidden"),this.wallpaperImage.classList.remove("hidden"),this.downloadBtn){const s=e.source!=="Nekos.best"?`Source: ${e.source}`:"",a=e.artist?`Artist: ${e.artist}`:"",o=[s,a].filter(Boolean).join(" | ");this.downloadBtn.title=o||"Download wallpaper"}},this.currentWallpaper=e}async initWallpaper(e=!1){try{if(!e&&await this.loadCachedWallpaper())return;this.wallpaperLoading.classList.remove("hidden"),this.wallpaperImage.classList.add("hidden");const t=await N.getWallpaper(e,this.allowNSFW);this.updateWallpaper(t)}catch(t){this.wallpaperLoading.innerHTML=`
        <div class="absolute inset-0 flex items-center justify-center">
          <p class="text-gray-400">${t.message}</p>
        </div>
      `}}updateNews(e){this.newsContainer.innerHTML=e.map(t=>`
      <div class="news-item">
        <h3 class="news-title">
          <a href="${t.link}" target="_blank" rel="noopener noreferrer">${t.title}</a>
        </h3>
        <p class="news-description">${t.description}</p>
      </div>
    `).join("")}async initNews(){try{const e=localStorage.getItem("newsSource")||i.news.defaultSource,t=i.news.sources[e];if(e==="anime"){const s="https://api.allorigins.win/raw?url="+encodeURIComponent("https://www.animenewsnetwork.com/news/rss.xml?ann-edition=us");console.log("Fetching news from:",s);const a=await fetch(s);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.text(),l=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("item"),d=Array.from(l).slice(0,i.news.itemsPerPage).map(p=>{var u,g,n;return{title:((u=p.getElementsByTagName("title")[0])==null?void 0:u.textContent)||"",link:((g=p.getElementsByTagName("link")[0])==null?void 0:g.textContent)||"",description:((n=p.getElementsByTagName("description")[0])==null?void 0:n.textContent)||""}});this.updateNews(d)}else if(e==="hackernews"){const s=await fetch(t.url);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json(),r=(await Promise.all(a.slice(0,i.news.itemsPerPage).map(c=>fetch(`${t.itemUrl}${c}.json`).then(l=>l.json())))).map(c=>({title:c.title,link:c.url||`${t.fallback.url}item?id=${c.id}`,description:`${c.score} points by ${c.by}`}));this.updateNews(r)}}catch(e){console.error("Error fetching news:",e),this.newsContainer.innerHTML=`
        <div class="news-item">
          <p class="text-gray-400">Failed to load news: ${e.message}</p>
        </div>
      `}}initClock(){const e=()=>{const t=new Date,s=t.toLocaleTimeString("en-US",{hour12:!0,hour:"2-digit",minute:"2-digit"}),a=t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});this.timeElement.textContent=s,this.dateElement.textContent=a};e(),setInterval(e,6e4)}async init(){await Promise.all([I.loadSavedTheme(),this.loadNSFWPreference(),this.initWallpaper(!1),this.initNews()])}initializeNewsSource(){const e=document.querySelectorAll(".news-source-btn"),t=localStorage.getItem("newsSource")||"anime";e.forEach(s=>{s.dataset.source===t?s.classList.add("active"):s.classList.remove("active"),s.addEventListener("click",()=>{e.forEach(a=>a.classList.remove("active")),s.classList.add("active"),localStorage.setItem("newsSource",s.dataset.source),this.fetchNews()})})}async fetchNews(){const e=document.getElementById("news-container"),t=localStorage.getItem("newsSource")||i.news.defaultSource,s=Array(i.news.itemsPerPage).fill(`
      <div class="news-item animate-pulse">
        <div class="h-4 bg-white/10 rounded w-3/4 mb-2"></div>
        <div class="h-3 bg-white/10 rounded w-1/2"></div>
      </div>
    `).join("");e.innerHTML=s;try{let a;const o=i.news.sources[t];if(t==="anime")try{const r=await chrome.runtime.sendMessage({type:"fetchRSS",url:o.url});if(!r.success)throw new Error(r.error||"Failed to fetch RSS feed");const d=new DOMParser().parseFromString(r.data,"text/xml").getElementsByTagName("item");if(a=Array.from(d).slice(0,i.news.itemsPerPage).map(p=>{var x,b,E,S;const u=((x=p.getElementsByTagName("title")[0])==null?void 0:x.textContent)||"",g=((b=p.getElementsByTagName("link")[0])==null?void 0:b.textContent)||"",n=((E=p.getElementsByTagName("description")[0])==null?void 0:E.textContent)||"",f=((S=p.getElementsByTagName("pubDate")[0])==null?void 0:S.textContent)||"",m=n.replace(/<[^>]*>/g,"").replace(/\s+/g," ").trim().substring(0,150)+"...";return{title:u,url:g,description:m,date:new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}}),a.length<i.news.itemsPerPage){const p={title:o.fallback.title,url:o.fallback.url,description:o.fallback.description,date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};for(;a.length<i.news.itemsPerPage;)a.push(p)}}catch(r){console.error("Error fetching anime news:",r),a=Array(i.news.itemsPerPage).fill(null).map(()=>({title:o.fallback.title,url:o.fallback.url,description:o.fallback.description,date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}))}else if(t==="hackernews")try{const r=await fetch(o.url);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const c=await r.json();a=(await Promise.all(c.slice(0,i.news.itemsPerPage).map(d=>fetch(`${o.itemUrl}${d}.json`).then(p=>p.json())))).map(d=>({title:d.title,url:d.url||`${o.fallback.url}item?id=${d.id}`,description:`${d.score} points by ${d.by}`,date:new Date(d.time*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}))}catch(r){console.error("Error fetching Hacker News:",r),a=Array(i.news.itemsPerPage).fill(null).map(()=>({title:o.fallback.title,url:o.fallback.url,description:o.fallback.description,date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}))}if(!a||a.length===0)throw new Error("No news items found");e.style.opacity="0",setTimeout(()=>{e.innerHTML=a.map(r=>`
          <div class="news-item">
            <h3 class="news-title">
              <a href="${r.url}" target="_blank" rel="noopener noreferrer">${r.title}</a>
            </h3>
            <p class="news-description">${r.description}</p>
            <p class="text-gray-400 text-sm mt-2">${r.date}</p>
          </div>
        `).join(""),e.style.opacity="1"},150)}catch(a){console.error("Error fetching news:",a),e.innerHTML=`
        <div class="news-item">
          <h3 class="news-title">
            <a href="#" class="text-red-400">Failed to load news</a>
          </h3>
          <p class="news-description">Please try again later or switch to a different news source.</p>
        </div>
      `}}initializeNews(){this.fetchNews(),setInterval(()=>this.fetchNews(),i.news.refreshInterval)}initializeNewsToggle(){this.updateNewsToggleState(),this.newsToggle.addEventListener("click",e=>{e.stopPropagation(),this.isNewsExpanded=!this.isNewsExpanded,this.updateNewsToggleState(),localStorage.setItem("newsExpanded",this.isNewsExpanded)}),this.newsContent.addEventListener("click",e=>{e.stopPropagation()}),document.addEventListener("click",()=>{this.isNewsExpanded&&(this.isNewsExpanded=!1,this.updateNewsToggleState(),localStorage.setItem("newsExpanded",this.isNewsExpanded))})}updateNewsToggleState(){this.isNewsExpanded?(this.newsContent.classList.remove("hidden"),document.querySelector(".news-container").classList.add("expanded"),document.querySelector(".news-container").classList.remove("collapsed")):(this.newsContent.classList.add("hidden"),document.querySelector(".news-container").classList.add("collapsed"),document.querySelector(".news-container").classList.remove("expanded"))}}const A="https://yurippe.vercel.app/api/quotes",C=async h=>{try{return(await(await fetch(`${A}?random=1`)).json())[0]}catch(e){return console.error("Error fetching anime quote:",e),null}},W=h=>{const e=`"${h.quote}" - ${h.character} (${h.show})`;navigator.share?navigator.share({title:"Anime Quote",text:e}).catch(console.error):navigator.clipboard.writeText(e).then(()=>alert("Quote copied to clipboard!")).catch(console.error)};class B{constructor(){this.quote=null,this.isVisible=!1,this.init()}async init(){this.container=document.createElement("div"),this.container.className="anime-quote-container",this.container.style.cssText=`
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        `,this.quoteIcon=document.createElement("div"),this.quoteIcon.className="quote-icon",this.quoteIcon.innerHTML='"',this.quoteIcon.style.cssText=`
            cursor: pointer;
            font-size: 40px;
            font-family: Georgia, serif;
            font-weight: bold;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 50%;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            color: rgba(255, 255, 255, 0.95);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
            transform: rotate(180deg);
            line-height: 1;
            position: relative;
            top: -2px;
        `,this.popup=document.createElement("div"),this.popup.className="quote-popup",this.popup.style.cssText=`
            display: none;
            position: absolute;
            left: 60px;
            top: 0;
            background: rgba(0, 0, 0, 0.6);
            color: #fff;
            padding: 20px;
            border-radius: 16px;
            max-width: 320px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        `;const e=document.createElement("div");e.style.cssText=`
            display: flex;
            gap: 8px;
            margin-top: 15px;
        `,this.shareButton=document.createElement("button"),this.shareButton.innerHTML="Share",this.shareButton.style.cssText=`
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
            flex: 1;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        `,this.refreshButton=document.createElement("button"),this.refreshButton.innerHTML="🔄 New Quote",this.refreshButton.style.cssText=`
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
            flex: 1;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        `;const t=s=>{s.addEventListener("mouseover",()=>{s.style.background="rgba(255, 255, 255, 0.15)",s.style.transform="translateY(-1px)",s.style.boxShadow="0 6px 12px rgba(0, 0, 0, 0.15)",s.style.border="1px solid rgba(255, 255, 255, 0.3)"}),s.addEventListener("mouseout",()=>{s.style.background="rgba(255, 255, 255, 0.1)",s.style.transform="translateY(0)",s.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",s.style.border="1px solid rgba(255, 255, 255, 0.2)"})};this.quoteIcon.addEventListener("mouseover",()=>{this.quoteIcon.style.background="rgba(255, 255, 255, 0.15)",this.quoteIcon.style.transform="translateY(-1px) rotate(180deg)",this.quoteIcon.style.boxShadow="0 6px 12px rgba(0, 0, 0, 0.15)",this.quoteIcon.style.border="1px solid rgba(255, 255, 255, 0.3)"}),this.quoteIcon.addEventListener("mouseout",()=>{this.quoteIcon.style.background="rgba(255, 255, 255, 0.1)",this.quoteIcon.style.transform="translateY(0) rotate(180deg)",this.quoteIcon.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",this.quoteIcon.style.border="1px solid rgba(255, 255, 255, 0.2)"}),t(this.shareButton),t(this.refreshButton),this.quoteIcon.addEventListener("click",s=>{s.stopPropagation(),this.toggleQuote()}),this.shareButton.addEventListener("click",s=>{s.stopPropagation(),this.handleShare()}),this.refreshButton.addEventListener("click",s=>{s.stopPropagation(),this.loadQuote()}),document.addEventListener("click",s=>{this.isVisible&&!this.popup.contains(s.target)&&!this.quoteIcon.contains(s.target)&&this.hideQuote()}),e.appendChild(this.refreshButton),e.appendChild(this.shareButton),this.popup.appendChild(e),this.container.appendChild(this.quoteIcon),this.container.appendChild(this.popup),document.body.appendChild(this.container),await this.loadQuote()}async loadQuote(){this.quote=await C(),this.quote&&this.updatePopupContent()}updatePopupContent(){if(!this.quote)return;const e=`
            <div style="margin-bottom: 15px;">
                <p style="margin: 0 0 10px 0; font-style: italic; font-size: 16px; line-height: 1.5; color: #fff; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">"${this.quote.quote}"</p>
                <p style="margin: 0; font-size: 14px; font-weight: 500; color: #fff; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">- ${this.quote.character}</p>
                <p style="margin: 5px 0 0 0; font-size: 13px; color: rgba(255, 255, 255, 0.9); text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">${this.quote.show}</p>
            </div>
        `;this.popup.innerHTML=e;const t=document.createElement("div");t.style.cssText=`
            display: flex;
            gap: 8px;
            margin-top: 15px;
        `,t.appendChild(this.refreshButton),t.appendChild(this.shareButton),this.popup.appendChild(t)}toggleQuote(){this.isVisible?this.hideQuote():this.showQuote()}showQuote(){this.quote&&(this.popup.style.display="block",this.quoteIcon.style.transform="scale(1.1) rotate(180deg)",this.isVisible=!0)}hideQuote(){this.popup.style.display="none",this.quoteIcon.style.transform="scale(1) rotate(180deg)",this.isVisible=!1}handleShare(){this.quote&&W(this.quote)}}const $=new L;$.init();new B;
